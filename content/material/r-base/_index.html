---
title: "R Básico"
author: "Curso-R"
date: 2018-07-16
categories: ["R"]
tags: ["R-Básico"]
slug: "r-base"
desc: "Neste capítulo vamos introduzir o R, suas principais estruturas de dados e um pequeno vocabulário de funções úteis."
requisitos: ["rstudio"]
layout: "article"
---



<div id="introducao" class="section level1">
<h1>Introdução</h1>
<p>A linguagem <code>R</code> é bem intuitiva. É possível fazer bastante coisa à base da tentativa e erro! Além disso, grande parte do conhecimento é escalável, isto é, quando você aprende a utilizar um certo tipo de função, o aprendizado pode ser replicado para funções parecidas. Essa ideia ficará bem clara quando falarmos dos pacotes do <code>tidyverse</code>, como o <code>dplyr</code> e o <code>ggplot2</code>.</p>
<p>Quando o aprendizado não for muito intuitivo ou a utilização de uma função for muito complicada, demandando às vezes conhecimento de Estatística ou Programação, você pode acabar precisando de uma forcinha. Felizmente, a comunidade R é bem ativa, e há várias formas de se conseguir ajuda. Nesta seção, vamos listar algumas dessas maneiras. Em seguida, faremos uma introdução ao RStudio, mostrando as suas principais funcionalidades. Então começaremos a conhecer o R, explorando diversos conceitos básicos.</p>
</div>
<div id="pedindo-ajuda" class="section level1">
<h1>Pedindo Ajuda</h1>
<p>No R, há quatro principais entidades para se pedir ajuda:</p>
<ul>
<li><p>Help/documentação do R (comandos <code>help(nome_da_funcao)</code> ou <code>?nome_da_funcao</code>)</p></li>
<li><p>Google</p></li>
<li><p>Stack Overflow</p></li>
<li><p>Coleguinha</p></li>
</ul>
<p>A busca por ajuda é feita preferencialmente, mas não necessariamente, na ordem acima.</p>
</div>
<div id="documentacao-do-r" class="section level1">
<h1>Documentação do R</h1>
<p>A documentação do R serve para você aprender a usar uma determinada função.</p>
<pre class="r"><code>?mean
help(mean)</code></pre>
<p>Cinco dicas:</p>
<ol style="list-style-type: decimal">
<li>Os exemplos no final são particularmente úteis.</li>
<li>Leia a seção <strong>Usage</strong> para ter noção de como usar.</li>
<li>Os parâmetros estão descritos em <strong>Arguments</strong>. Identifique quais tipos de objetos eles recebem.</li>
<li>Caso essa função não atenda às suas necessidades, a seção <strong>See Also</strong> sugere funções relacionadas.</li>
<li>Alguns pacotes possuem tutorias de uso mais completos. Esses textos são chamados de <code>vignettes</code> e podem ser acessados com a função <code>vignette(package = 'nomeDoPacote')</code>. Por exemplo, <code>vignette(package = 'dplyr')</code>. Depois de ver a lista de artigos, escolha um nome e rode <code>vignette(topic = 'nome', package = 'nomeDoPacote')</code>. Por exemplo, <code>vignette(topic = 'introduction', package = 'dplyr')</code>.</li>
</ol>
</div>
<div id="google" class="section level1">
<h1>Google</h1>
<p>Há uma comunidade gigantesca de usuários de R gerando diariamente uma infinidade de conteúdos e discussões. Não raramente, você irá encontrar discussões sobre o seu problema simplesmente jogando o seu erro no Google. Essa deve ser sua primeira tentativa! Pesquisas em inglês aumentam consideravelmente a chance de encontrar uma resposta.</p>
<p>Exemplo (repare no ‘r’ adicionado na busca, isso ajuda bastante):</p>
<pre class="r"><code>log(&quot;5&quot;)
## Error in log(&quot;5&quot;): non-numeric argument to mathematical function</code></pre>
<p><img src="/material/r-base/figures/ajuda_google.png" style="width: 100%;"></img></p>
</div>
<div id="stack-overflow" class="section level1">
<h1>Stack Overflow</h1>
<p>O <a href="http://stackoverflow.com/">Stack Overflow</a> e o <a href="http://pt.stackoverflow.com/">Stack Overflow em Português</a> são sites de Pergunta e Resposta amplamente utilizados por todas as linguagens de programação, e o R é uma delas. Nos EUA, chegam até a usar a reputação dos usuários como diferencial no currículo!</p>
<p>Provavelmente o Google lhe indicará uma página deles quando você estiver procurando ajuda. E quando todas as fontes possíveis de ajuda falharem, o Stack Overflow lhe dará o espaço para <strong>criar sua própria pergunta</strong>.</p>
<p><strong>Um ponto importante</strong>: como fazer uma <strong>boa</strong> pergunta no Stack Overflow?</p>
<p>No site, tem um tutorial com uma lista de boas práticas, <a href="http://pt.stackoverflow.com/help/how-to-ask">que se encontra aqui</a>. Algumas dicas são</p>
<ul>
<li>ser conciso;</li>
<li>ser específico;</li>
<li>ter mente aberta; e</li>
<li>ser gentil.</li>
</ul>
<p>Porém, no caso do R, há outro requisito que vai aumentar muito sua chance de ter uma boa resposta: <strong>exemplinho minimal e reprodutível</strong>.</p>
<ul>
<li><p>Ser <strong>minimal</strong>: usar bancos de dados menores e utilizar pedaços de códigos apenas suficientes para apresentar o seu problema. Não precisa de banco de dados de um milhão de linhas e nem colocar o seu código inteiro para descrever a sua dúvida.</p></li>
<li><p>Ser <strong>reprodutível</strong>: o seu código deve rodar fora da sua máquina. Se você não fornecer uma versão do seu problema que rode (ou que imite seu erro), as pessoas vão logo desistir de te ajudar. Por isso, nunca coloque bancos de dados que só você tem acesso. Use bancos de dados que já vem no R ou disponibilize um exemplo (possivelmente anonimizado) em <code>.csv</code> na web para baixar. E se precisar utilizar funções diferentes, coloque as <code>library</code>’s correspondentes.</p></li>
</ul>
</div>
<div id="r-markdown" class="section level1">
<h1>R Markdown</h1>
<p>O R Markdown é um tipo de documento especial que contém tanto textos quanto códigos em R, tudo escrito no mesmo lugar.</p>
<p>O <em>markdown</em> nada mais é do que um documento de texto com alguns padrões básicos de formatação, como negrito, itálico, títulos, subtítulos, itens e referências cruzadas. Já os <em>chunks</em> são pedaços de códigos em R encapsulados por três crases (```). Os códigos são executados sempre que o documento é processado.</p>
<pre><code>## ```{r}
## isto é um chunk. 
## ```</code></pre>
<div class="admonition note">
<p class="admonition-title">
Nota
</p>
<p>
Este site foi escrito em R Markdown. Toda vez que aparecer exemplos de código de R, havia um chunk no .Rmd original.
</p>
</div>
<p>Para produção de relatórios, o R Markdown possui algumas vantagens, como:</p>
<ol style="list-style-type: decimal">
<li><strong>Simplicidade e foco</strong>. Permite ao usuário o foco na análise e não na formatação do documento.</li>
<li><strong>Versátil</strong>. Pode ser utilizado para gerar documentos em <span class="math inline">\(\LaTeX\)</span>, <code>Word</code>, <code>HTML</code> e apresentações em <code>beamer</code>, <code>pptx</code> e <code>HTML</code> (de vários tipos). Pode ainda gerar sites, livros, dissertações de mestrado e até mesmo dashboards interativos.</li>
<li><strong>Reprodutível</strong>. O R Markdown nada mais é que um arquivo de texto. Além disso, ele tenta te obrigar a fazer o documento mais autocontido possível. Assim, um documento <code>.Rmd</code> é fácil de compartilhar e de ser utilizado pelo receptor. Lembre-se, o receptor pode ser o futuro você! Vale enfatizar que a reprodutibilidade é considerada como um dos princípios fundamentais da ciência. Então, só de usar R Markdown, você já está colaborando com o método científico. :)</li>
<li><strong>Flexível</strong>. É possível configurar e criar <em>templates</em> de análises para quaisquer tipos de aplicações e clientes. Os textos podem ser parametrizados por números que variam de versão para versão, mensalmente, por exemplo, tudo escrito somente em R.</li>
</ol>
<p>Criar um R Markdown novo no RStudio é fácil. Clique no botão de criar arquivo e selecione R Markdown.</p>
<p><img src="/material/r-base/figures/criar_rmarkdown.png" style="width: 30%;"></img></p>
<p>Para detalhes sobre como utilizar o R Markdown, leia o <a href="http://r4ds.had.co.nz/r-markdown.html">r4ds</a> e <a href="http://rmarkdown.rstudio.com/lesson-1.html">o tutorial do RStudio</a>.</p>
</div>
<div id="instalar-pacotes" class="section level1">
<h1>Instalar pacotes</h1>
<p>O grande trunfo do R são seus pacotes. Assim, fique bastante à vontade para instalar e atualizar muitos e muitos pacotes ao longo da sua experiência com o R.</p>
<p>Existem três principais maneiras de instalar pacotes. Em ordem de frequência, são:</p>
<ul>
<li>Via CRAN (Comprehensive R Archive Network): <code>install.packages(&quot;nome-do-pacote&quot;)</code>.</li>
<li>Via Github: <code>devtools::install_github(&quot;nome-do-repo/nome-do-pacote&quot;)</code>.</li>
<li>Via arquivo .zip/.tar.gz: <code>install.packages(&quot;C:/caminho/nome-do-pacote.zip&quot;, repos = NULL)</code>.</li>
</ul>
</div>
<div id="via-cran" class="section level1">
<h1>Via CRAN</h1>
<p>Instale pacotes que não estão na sua biblioteca usando a função <code>install.packages(&quot;nome_do_pacote&quot;)</code>. Por exemplo:</p>
<pre class="r"><code>install.packages(&quot;magrittr&quot;)</code></pre>
<p>E, de agora em diante, não precisa mais instalar. Basta carregar o pacote com <code>library(magrittr)</code>.</p>
<div class="admonition note">
<p class="admonition-title">
Dica!
</p>
<p>
Escreva nome_do_pacote::nome_da_funcao() se quiser usar apenas uma função de um determinado pacote. O operador :: serve para isso. Essa forma também é útil quando se tem duas funções com o mesmo nome e precisamos garantir que o código vá usar a função do pacote correto.
</p>
</div>
</div>
<div id="via-github" class="section level1">
<h1>Via Github</h1>
<p>Desenvolvedores costumam disponibilizar a última versão de seus pacotes no Github, e alguns deles sequer estão no CRAN. Mesmo assim ainda é possível utilizá-los instalando diretamente pelo github. O comando é igualmente simples:</p>
<pre class="r"><code>devtools::install_github(&quot;rstudio/shiny&quot;)</code></pre>
<p>Apenas será necessário o username e o nome do repositório (que geralmente tem o mesmo nome do pacote). No exemplo, o username foi “rstudio” e o repositório foi “shiny”.</p>
<p>Se você não é familiar com o github, não se preocupe! Os pacotes disponibilizados na plataforma geralmente têm um <code>README</code> cuja primeira instrução é sobre a instalação. Se não tiver, provavelmente este pacote não te merece! =)</p>
</div>
<div id="via-arquivo-.zip.tar.gz" class="section level1">
<h1>Via arquivo .zip/.tar.gz</h1>
<p>Se você precisar instalar um pacote que está zipado no seu computador (ou em algum servidor), utilize o seguinte comando:</p>
<pre class="r"><code>install.packages(&quot;C:/caminho/para/o/arquivo/zipapo/nome-do-pacote.zip&quot;, repos = NULL)</code></pre>
<p>É semelhante a instalar pacotes via CRAN, com a diferença que agora o nome do pacote é o caminho inteiro até o arquivo. O parâmetro <code>repos = NULL</code> informa que estamos instalando a partir da máquina local.</p>
<p>A aba <strong><em>Packages</em></strong> do RStudio também ajuda a administrar os seus pacotes.</p>
<p><img src="/material/r-base/figures/instalar_pacote_rstudio.png" style="width: 80%;"></p>
</div>
<div id="r-como-calculadora" class="section level1">
<h1>R como calculadora</h1>
<p>Pelo console, é possível executar qualquer comando do R.</p>
<pre class="r"><code>1:30
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
## [24] 24 25 26 27 28 29 30</code></pre>
<p>Esse comando é uma forma simplificada de criar um vetor de inteiros de 1 a 30. Os números que aparecem entre colchetes ([1] e [24]) indicam o índice do primeiro elemento impresso em cada linha.</p>
<div class="admonition note">
<p class="admonition-title">
Quando compilamos?
</p>
<p>
Quem vem de linguagens como o C ou Java espera que seja necessário compilar o código em texto para o código das máquinas (geralmente um código binário). No R, isso não é necessário. O R é uma linguagem de programação dinâmica que interpreta o seu código enquanto você o executa.
</p>
</div>
<p>Tente jogar no console <code>2 * 2 - (4 + 4) / 2</code>. Pronto! Com essa simples expressão você já é capaz de pedir ao R para fazer qualquer uma das quatro operações aritméticas básicas. A seguir, apresentamos uma lista resumindo como fazer as principais operações no R.</p>
<pre class="r"><code>1 + 1    # adição
## [1] 2
4 - 2    # subtração
## [1] 2
2 * 3    # multiplicação
## [1] 6
5 / 3    # divisão
## [1] 1.666667
4 ^ 2    # potência
## [1] 16
5 %% 3   # resto da divisão de 5 por 3
## [1] 2
5 %/% 3  # parte inteira da divisão de 5 por 3
## [1] 1</code></pre>
<p>Além do mais, as operações e suas precedências são mantidas como na matemática, ou seja, divisão e multiplicação são calculadas antes da adição e subtração. E os parênteses nunca são demais!</p>
<p>Uma outra forma de executar uma expressão é escrever o código no <strong>editor</strong> e teclar <code>Ctrl + Enter</code> ou <code>Ctrl + R</code>. Assim, o comando é enviado para o <strong>console</strong>, onde é diretamente executado.</p>
<p>Se você digitar um comando incompleto, como <code>5 +</code>, e apertar <code>Enter</code>, o R mostrará um <code>+</code>, o que não tem nada a ver com somar alguma coisa. Isso significa que o R está esperando que você complete o seu comando. Termine o seu comando ou aperte <code>Esc</code> para recomeçar.</p>
<pre><code>&gt; 5 -
+ 
+ 5
[1] 0</code></pre>
<p>Se você digitar um comando que o R não reconhece, ele retornará uma mensagem de erro.</p>
<p>NÃO ENTRE EM PÂNICO!</p>
<p>Ele só está avisando que não conseguiu interpretar o comando. Você pode digitar outro comando normalmente em seguida.</p>
<pre><code>&gt; 5 % 5
Error: unexpected input in &quot;5 % 5&quot;
&gt; 5 - 5
[1] 0</code></pre>
</div>
<div id="objetos" class="section level1">
<h1>Objetos</h1>
<p>O R te permite salvar dados dentro de um objeto. Para isso, utilizamos o operador <code>&lt;-</code>.</p>
<p>No exemplo abaixo, salvamos o valor 1 em <code>a</code>. Sempre que o R encontrar o símbolo <code>a</code>, ele vai substituí-lo por 1.</p>
<pre class="r"><code>a &lt;- 1
a
## [1] 1</code></pre>
<div class="admonition note">
<p class="admonition-title">
Atenção!
</p>
<p>
O R diferencia letras maiúsculas e minúsculas, isto é, <b>a</b> é considerado um objeto diferente de <b>A</b>.
</p>
</div>
<div id="objetos-atomicos" class="section level2">
<h2>Objetos atômicos</h2>
<p>Existem cinco classes básicas ou “atômicas” no R:</p>
<ul>
<li>character</li>
<li>numeric</li>
<li>integer</li>
<li>complex</li>
<li>logical</li>
</ul>
<p>Veja alguns exemplos:</p>
<pre class="r"><code># characters

&quot;a&quot;
## [1] &quot;a&quot;
&quot;1&quot;
## [1] &quot;1&quot;
&quot;positivo&quot;
## [1] &quot;positivo&quot;
&quot;Error: objeto x não encontrado&quot;
## [1] &quot;Error: objeto x não encontrado&quot;

# numeric

1
## [1] 1
0.10
## [1] 0.1
0.95
## [1] 0.95
pi
## [1] 3.141593

# integer

1L
## [1] 1
5L
## [1] 5
10L
## [1] 10

# complex (raramente utilizado para análise de dados)

2 + 5i
## [1] 2+5i

# logical

TRUE
## [1] TRUE
FALSE
## [1] FALSE</code></pre>
<p>Para saber a classe de um objetivo, você pode usar a função <code>class()</code>.</p>
<pre class="r"><code>x &lt;- 1
class(x)
## [1] &quot;numeric&quot;

y &lt;- &quot;a&quot;
class(y)
## [1] &quot;character&quot;

z &lt;- TRUE
class(z)
## [1] &quot;logical&quot;</code></pre>
</div>
<div id="vetores" class="section level2">
<h2>Vetores</h2>
<p>Vetores no R são os objetos mais simples que podem guardar objetos atômicos.</p>
<pre class="r"><code>vetor1 &lt;- c(1, 2, 3, 4)
vetor2 &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)

vetor1
## [1] 1 2 3 4
vetor2
## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<p>Um vetor tem sempre a mesma classe dos objetos que guarda.</p>
<pre class="r"><code>class(vetor1)
## [1] &quot;numeric&quot;
class(vetor2)
## [1] &quot;character&quot;</code></pre>
<p>De forma bastante intuitiva, você pode fazer operações com vetores.</p>
<pre class="r"><code>vetor1 - 1
## [1] 0 1 2 3</code></pre>
<p>Quando você faz <code>vetor1 - 1</code>, o R subtrai <code>1</code> de cada um dos elementos do vetor. O mesmo acontece quando você faz qualquer operação aritmética com vetores no R.</p>
<pre class="r"><code>vetor1 / 2
vetor1 * 10</code></pre>
<p>Você também pode fazer operações que envolvem mais de um vetor:</p>
<pre class="r"><code>vetor1 * vetor1
## [1]  1  4  9 16</code></pre>
<p>Neste caso, o R irá alinhar os dois vetores e multiplicar elemento por elemento. Isso pode ficar um pouco confuso quando os dois vetores não possuem o mesmo tamanho:</p>
<pre class="r"><code>vetor2 &lt;- 1:3
vetor1 * vetor2
## Warning in vetor1 * vetor2: longer object length is not a multiple of
## shorter object length
## [1] 1 4 9 4</code></pre>
<p>O R alinhou os dois vetores e, como eles não possuíam o mesmo tamanho, foi repetindo o vetor menor até completar o vetor maior. Esse comportamento é chamado de <strong>reciclagem</strong> e é útil para fazer operações elemento por elemento (vetorizadamente), mas às vezes pode ser confuso. Com o tempo, você aprenderá a se aproveitar dele.</p>
</div>
<div id="misturando-objetos" class="section level2">
<h2>Misturando objetos</h2>
<div class="admonition note">
<p class="admonition-title">
Vetores são homogêneos
</p>
<p>
Os elementos de um vetor são sempre da mesma classe. Ou todos são numéricos, ou são todos character, ou todos são lógicos etc. Não dá para ter um número e um character no mesmo vetor, por exemplo.
</p>
</div>
<p>Se colocarmos duas ou mais classes diferentes dentro de um mesmo vetor, o R vai forçar que todos os elementos passem a pertencer à mesma classe. O número <code>1.7</code> viraria <code>&quot;1.7&quot;</code> se fosse colocado ao lado de um <code>&quot;a&quot;</code>.</p>
<pre class="r"><code>y &lt;- c(1.7, &quot;a&quot;)  # character
y &lt;- c(TRUE, 2)   # numeric
y &lt;- c(TRUE, &quot;a&quot;) # character</code></pre>
<p>A ordem de precedência é:</p>
<p><strong>DOMINANTE</strong> <code>character &gt; complex &gt; numeric &gt; integer &gt; logical</code> <strong>RECESSIVO</strong></p>
</div>
<div id="forcando-classes-explicitamente" class="section level2">
<h2>Forçando classes explicitamente</h2>
<p>Você pode coagir um objeto a ser de uma classe específica com as funções <code>as.character()</code>, <code>as.numeric()</code>, <code>as.integer()</code> e <code>as.logical()</code>. É equivalente à função <code>convert()</code> do SQL.</p>
<pre class="r"><code>x &lt;- 0:4
class(x)
## [1] &quot;integer&quot;
as.numeric(x)
## [1] 0 1 2 3 4
as.logical(x)
## [1] FALSE  TRUE  TRUE  TRUE  TRUE
as.character(x)
## [1] &quot;0&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;</code></pre>
<p>Se o R não entender como coagir uma classe na outra, ele soltará um <code>warning</code> informado que colocou <code>NA</code> no lugar.</p>
<pre class="r"><code>x &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)
as.numeric(x)
## Warning: NAs introduced by coercion
## [1] NA NA NA</code></pre>
<div class="admonition note">
<p class="admonition-title">
Observação
</p>
<p>
O <b>NA</b> tem o mesmo papel que o <b>null</b> do SQL. Porém, há um <b>NULL</b> no R também, com diferenças sutis que vamos abordar mais adiante.
</p>
</div>
</div>
<div id="matrizes" class="section level2">
<h2>Matrizes</h2>
<p>Matrizes são vetores com duas dimensões (e por isso só possuem elementos de uma mesma classe).</p>
<pre class="r"><code>m &lt;- matrix(1:6, nrow = 2, ncol = 3)
m
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
dim(m) # funçăo dim() retorna a dimensăo do objeto.
## [1] 2 3</code></pre>
<p>Repare que os números de 1 a 6 foram dispostos na matriz coluna por coluna (<em>column-wise</em>), ou seja, preenchendo de cima para baixo e depois da esquerda para a direita.</p>
<p><strong>Operações úteis</strong></p>
<pre class="r"><code>m[3,  ]   # seleciona a terceira linha
m[ , 2]   # seleciona a segunda coluna
m[1, 2]   # seleciona o primeiro elemento da segunda coluna
t(m)      # matriz transposta
m %*% n   # multiplicação matricial
solve(m)  # matriz inversa de m</code></pre>
</div>
<div id="fatores" class="section level2">
<h2>Fatores</h2>
<p>Fatores podem ser vistos como vetores de inteiros que possuem rótulos (levels).</p>
<pre class="r"><code>sexo &lt;- c(&quot;M&quot;, &quot;H&quot;, &quot;H&quot;, &quot;H&quot;, &quot;M&quot;, &quot;M&quot;, &quot;H&quot;)
fator &lt;- as.factor(sexo)
fator
## [1] M H H H M M H
## Levels: H M
as.numeric(fator)
## [1] 2 1 1 1 2 2 1</code></pre>
<p>Eles são úteis para representar uma variável categórica (nominal e ordinal). Na modelagem, eles serão tratados de maneira especial em funções como <code>lm()</code> e <code>glm()</code>.</p>
<p>A função <code>levels()</code> retorna os rótulos do fator:</p>
<pre class="r"><code>levels(fator)
## [1] &quot;H&quot; &quot;M&quot;</code></pre>
<p>A ordem das categorias de um fator pode importar. Como exemplo, temos as caselas de referência de modelos estatísticos e a ordem das barras de um gráfico. Para ajudar nesta tarefa, consulte o pacote <a href="https://github.com/tidyverse/forcats">forcats</a>.</p>
<div class="admonition note">
<p class="admonition-title">
Um erro comum e desastroso
</p>
<p>
Quando um vetor de números está como <b>factor</b>, ao tentar transformá-lo em <b>numeric</b>, você receberá um vetor de inteiros que não tem nada a ver com os valores originais!
</p>
</div>
<pre class="r"><code>numeros &lt;- factor(c(&quot;10&quot;, &quot;55&quot;, &quot;55&quot;, &quot;12&quot;, &quot;10&quot;, &quot;-5&quot;, &quot;-90&quot;))

as.numeric(numeros)
## [1] 3 5 5 4 3 1 2
#Por essa eu năo esperava!</code></pre>
<p>Para evitar isso, use <code>as.character()</code> antes de transformar para número.</p>
<pre class="r"><code>as.numeric(as.character(numeros))
## [1]  10  55  55  12  10  -5 -90
# Agora está OK!</code></pre>
</div>
<div id="valores-especiais" class="section level2">
<h2>Valores especiais</h2>
<p>Existem valores reservados para representar dados faltantes, infinitos, e indefinições matemáticas.</p>
<ul>
<li><strong>NA</strong> (Not Available) significa dado faltante/indisponível. É o <code>null</code> do SQL ou o <code>.</code> do SAS. O <code>NA</code> tem uma classe, ou seja, podemos ter <code>NA</code> numeric, <code>NA</code> character etc.</li>
<li><strong>NaN</strong> (Not a Number) representa indefinições matemáticas, como <code>0/0</code> e <code>log(-1)</code>. Um <code>NaN</code> é um <code>NA</code>, mas a recíproca não é verdadeira.</li>
<li><strong>Inf</strong> (Infinito) é um número muito grande ou o limite matemático, por exemplo, <code>1/0</code> e <code>10^310</code>. Aceita sinal negativo <code>-Inf</code>.</li>
<li><strong>NULL</strong> representa a ausência de informação. Conceitualmente, a diferença entre <code>NA</code> e <code>NULL</code> é sutil, mas, no R, o <code>NA</code> está mais alinhado com os conceitos de estatística (ou como gostaríamos que os dados faltantes se comportassem em análise de dados) e o <code>NULL</code> está em sintonia com comportamentos de lógica de programação.</li>
<li>Use as funções <code>is.na()</code>, <code>is.nan()</code>, <code>is.infinite()</code> e <code>is.null()</code> para testar se um objeto é um desses valores.</li>
</ul>
<pre class="r"><code>x &lt;- c(NaN, Inf, 1, 2, 3, NA)
is.na(x)
## [1]  TRUE FALSE FALSE FALSE FALSE  TRUE
is.nan(x)
## [1]  TRUE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div id="listas" class="section level2">
<h2>Listas</h2>
<p>Listas são um tipo especial de vetor que aceita elementos de classes diferentes.</p>
<pre class="r"><code>x &lt;- list(1:5, &quot;Z&quot;, TRUE, c(&quot;a&quot;, &quot;b&quot;))
x
## [[1]]
## [1] 1 2 3 4 5
## 
## [[2]]
## [1] &quot;Z&quot;
## 
## [[3]]
## [1] TRUE
## 
## [[4]]
## [1] &quot;a&quot; &quot;b&quot;</code></pre>
<p>É um dos objetos mais importantes para armazenar dados e vale a pena saber manuseá-los bem. Existem muitas funções que fazem das listas objetos incrivelmente úteis.</p>
<p>Criamos uma lista com a função <code>list()</code>, que aceita um número arbitrário de elementos. Listas aceitam QUALQUER tipo de objeto. Podemos ter listas dentro de listas, por exemplo. Como para quase todas as classes de objetos no R, as funções <code>is.list()</code> e <code>as.list()</code> também existem.</p>
<p>Na lista <code>pedido</code> abaixo, temos <code>numeric</code>, <code>Date</code>, <code>character</code>, vetor de <code>character</code> e <code>list</code> contida em uma lista:</p>
<pre class="r"><code>pedido &lt;- list(pedido_id = 8001406,
               pedido_registro = as.Date(&quot;2017-05-25&quot;),
               nome = &quot;Athos&quot;, 
               sobrenome = &quot;Petri Damiani&quot;, 
               cpf = &quot;12345678900&quot;, 
               email = &quot;athos.damiani@gmail.com&quot;, 
               qualidades = c(&quot;incrível&quot;, &quot;impressionante&quot;),
               itens = list(
                 list(descricao = &quot;Ferrari&quot;, 
                      frete = 0, 
                      valor = 500000),
                 list(descricao = &quot;Dolly&quot;, 
                      frete = 1.5, 
                      valor = 3.90)
               ), 
               endereco = list(entrega = list(logradouro = &quot;Rua da Glória&quot;, 
                                              numero = &quot;123&quot;,
                                              complemento = &quot;apto 71&quot;),
                               cobranca = list(logradouro = &quot;Rua Jose de Oliveira Coutinho&quot;,
                                               numero = &quot;151&quot;,
                                               complemento = &quot;5o andar&quot;)
               )
)</code></pre>
<p><strong>Operações úteis</strong></p>
<pre class="r"><code>pedido$cpf     # elemento chamado &#39;cpf&#39;
pedido[1]      # nova lista com apenas o primeiro elemento
pedido[[2]]    # segundo elemento
pedido[&quot;nome&quot;] # nova lista com apenas o elemento chamado &#39;nome&#39;</code></pre>
<p>Certamente você se deparará com listas quando for fazer análise de dados com o R. Nos tópicos mais aplicados, iremos aprofundar sobre o tema. O pacote <a href="https://github.com/hadley/purrr">purrr</a> contribui com funcionalidades incríveis para listas.</p>
</div>
<div id="data.frame" class="section level2">
<h2>data.frame</h2>
<p>Um <code>data.frame</code> é o mesmo que uma tabela do SQL ou um spreadsheet do Excel, por isso são objetos muito importantes.</p>
<p>Usualmente, seus dados serão importados para um objeto <code>data.frame</code>. Em grande parte do curso, eles serão o principal objeto de estudo.</p>
<p>Os <code>data.frame</code>’s são listas especiais em que todos os elementos possuem <strong>o mesmo comprimento</strong>. Cada elemento dessa lista pode ser pensado como uma coluna da tabela. Seu comprimento representa o número de linhas.</p>
<p>Já que são listas, essas colunas podem ser de classes diferentes. Essa é a grande diferença entre <code>data.frame</code>’s e matrizes. Algumas funções úteis:</p>
<ul>
<li><code>head()</code> - Mostra as primeiras 6 linhas.</li>
<li><code>tail()</code> - Mostra as últimas 6 linhas.</li>
<li><code>dim()</code> - Número de linhas e de colunas.</li>
<li><code>names()</code> - Os nomes das colunas (variáveis).</li>
<li><code>str()</code> - Estrutura do data.frame. Mostra, entre outras coisas, as classes de cada coluna.</li>
<li><code>cbind()</code> - Acopla duas tabelas lado a lado.</li>
<li><code>rbind()</code> - Empilha duas tabelas.</li>
</ul>
<p>O exemplo abaixo mostra que uma lista pode virar <code>data.frame</code> se todos os elementos tiverem o mesmo comprimento.</p>
<pre class="r"><code>minha_lista &lt;- list(x = c(1, 2, 3), y = c(&quot;a&quot;, &quot;b&quot;))
as.data.frame(minha_lista)
## Error in (function (..., row.names = NULL, check.rows = FALSE, check.names = TRUE, : arguments imply differing number of rows: 3, 2</code></pre>
<pre class="r"><code>minha_lista &lt;- list(x = c(1, 2, 3), y = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))
as.data.frame(minha_lista)
##   x y
## 1 1 a
## 2 2 b
## 3 3 c</code></pre>
</div>
</div>
<div id="controles-de-fluxo" class="section level1">
<h1>Controles de Fluxo</h1>
<p>Como toda boa linguagem de programação, o R possui estruturas de <code>if</code>’s, <code>else</code>’s, <code>for</code>’s, <code>while</code>’s etc. Esses <strong>controles de fluxo</strong> são importantes na hora de programar.</p>
<div id="if-e-else" class="section level2">
<h2>IF e ELSE</h2>
<p>O seguinte trecho de código só será executado se o objeto <code>x</code> for igual a 1. Repare que a condição de igualdade é representada por dois iguais <code>==</code>.</p>
<pre class="r"><code>x &lt;- 2

if(x == 1) {         
  Sys.time()      # Devolve a data/hora no momento da execução.
}</code></pre>
<pre class="r"><code>x &lt;- 1

if(x == 1) {
  Sys.time()
}
## [1] &quot;2018-08-06 14:22:33 -03&quot;</code></pre>
<p>O R só vai executar o que está na expressão dentro das chaves <code>{}</code> se o que estiver dentro dos parênteses <code>()</code> retornar <code>TRUE</code>.</p>
<p>A sintaxe com o <code>else</code> e o <code>if else</code> é</p>
<pre class="r"><code>if(x &lt; 0) {
  
  sinal &lt;- &quot;negativo&quot;
  
} else if(x == 0) {
  
  sinal &lt;- &quot;neutro&quot;
  
} else if(x &gt; 0) {
  
  sinal &lt;- &quot;positivo&quot;
}

sinal
## [1] &quot;positivo&quot;</code></pre>
<div class="admonition note">
<p class="admonition-title">
Diferença entre SQL e R nas comparações lógicas
</p>
<p>
<b>Igualdade</b>: no SQL é só um sinal de igual: &lt;2 = 1. No R são dois: 2 == 1. <br> <b>Diferença</b>: teste de diferente no R é != em vez de de &lt;&gt;. <br> <b>Negação</b>: em vez de usar a palavra “not” igual ao SQL, usamos !. Por exemplo, “entidade_id not in (‘100515’)” fica “!entidade_id %in% c(‘100515’)”.
</p>
</div>
</div>
<div id="for" class="section level2">
<h2>for</h2>
<p>Vamos usar o <code>for</code> para somar todos os elementos de um vetor.</p>
<pre class="r"><code>x &lt;- 1:10   # Cria um vetor com a sequência 1, 2, ..., 10.
soma &lt;- 0

for(i in 1:10) {
  soma &lt;- soma + x[i]
}

soma
## [1] 55</code></pre>
<p>De forma equivalente, podemos usar diretamente a função <code>sum()</code>.</p>
<pre class="r"><code>sum(x)
## [1] 55</code></pre>
<p>Agora, vamos imprimir na tela o resultado da divisão de cada elemento de um vetor por dois. Para isso, utilizaremos a função <code>print()</code>.</p>
<pre class="r"><code>vetor &lt;- 30:35
indices &lt;- seq_along(vetor) # cria o vetor de índices segundo o tamanho 
                            # do objeto vetor.   
for(i in indices) {
  print(vetor[1:i] / 2)
}
## [1] 15
## [1] 15.0 15.5
## [1] 15.0 15.5 16.0
## [1] 15.0 15.5 16.0 16.5
## [1] 15.0 15.5 16.0 16.5 17.0
## [1] 15.0 15.5 16.0 16.5 17.0 17.5</code></pre>
<p>No trecho de código acima, preste atenção no resultado individual de cada uma das operações para entender como o R funciona.</p>
<p>Para finalizar, listamos na tabela abaixo os principais operadores lógicos.</p>
<table>
<thead>
<tr class="header">
<th align="left">Operador</th>
<th align="left">Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">x &lt; y</td>
<td align="left">x menor que y?</td>
</tr>
<tr class="even">
<td align="left">x &lt;= y</td>
<td align="left">x menor ou igual a y?</td>
</tr>
<tr class="odd">
<td align="left">x &gt; y</td>
<td align="left">x maior que y?</td>
</tr>
<tr class="even">
<td align="left">x &gt;= y</td>
<td align="left">x maior ou igual a y?</td>
</tr>
<tr class="odd">
<td align="left">x == y</td>
<td align="left">x igual a y?</td>
</tr>
<tr class="even">
<td align="left">x != y</td>
<td align="left">x diferente de y?</td>
</tr>
<tr class="odd">
<td align="left">!x</td>
<td align="left">Negativa de x</td>
</tr>
<tr class="even">
<td align="left">x | y</td>
<td align="left">x ou y são verdadeiros?</td>
</tr>
<tr class="odd">
<td align="left">x &amp; y</td>
<td align="left">x e y são verdadeiros?</td>
</tr>
<tr class="even">
<td align="left">xor(x, y)</td>
<td align="left">x ou y são verdadeiros (apenas um deles)?</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="formulas" class="section level1">
<h1>Fórmulas</h1>
<p>Fórmulas são objetos do tipo <code>y ~ x</code>. Em geral, elas representam associações entre objetos, como em um modelo de regressão. As funções as usam de diversas maneiras, mas o exemplo mais emblemático vem da modelagem estatística.</p>
<pre class="r"><code>formula &lt;- y ~ x1 + x2
class(formula)
## [1] &quot;formula&quot;</code></pre>
<p>A função <code>lm()</code> é a que ajusta um modelo linear no R, e <code>lm(y ~ x)</code> lê-se “regressão linear de y explicada por x”.</p>
<pre class="r"><code>minha_formula &lt;- Sepal.Width ~ Petal.Length + Petal.Width
class(minha_formula)
## [1] &quot;formula&quot;
lm(minha_formula, data = iris)
## 
## Call:
## lm(formula = minha_formula, data = iris)
## 
## Coefficients:
##  (Intercept)  Petal.Length   Petal.Width  
##       3.5870       -0.2571        0.3640</code></pre>
<p>No caso específico dos modelos lineares, são nas fórmulas que conseguimos descrever as variáveis explicativas e suas interações. A fórmula <code>y ~ x1 * x2</code> significa “y regredido por x1, x2 e a interação entre x1 e x2”. Fórmulas aparecem frequentemente em tarefas de modelagem.</p>
<p>Demais usos de fórmulas aparecerão em outras funções, como as do pacote <code>ggplot2</code>, com outros significados, e a documentação nos dirá como usá-las.</p>
</div>
<div id="graficos-base" class="section level1">
<h1>Gráficos (base)</h1>
<p>O R já vem com funções básicas que fazem gráficos estatísticos de todas as naturezas.</p>
<ul>
<li>Vantagens: são rápidas e simples.</li>
<li>Desvantagens: são feias e difíceis para gerar gráficos complexos.</li>
</ul>
<p>Nesta seção, mostraremos como construir alguns tipos de gráficos usando as funções base do R, mas <a href="http://material.curso-r.com/ggplot/">o nosso foco em visualização de dados</a> está nas funções do pacote <code>ggplot2</code>.</p>
<div id="grafico-de-dispersao" class="section level2">
<h2>Gráfico de dispersão</h2>
<p>Para construir um gráfico de dispersão, utilizamos a função <code>plot()</code>. Seus principais parâmetros são:</p>
<ul>
<li><code>x</code>, <code>y</code> - Vetores para representarem os eixos x e y.</li>
<li><code>type</code> - Tipo de gráfico. Pode ser pontos, linhas, escada, entre outros.</li>
</ul>
<p>Para mais detalhes sobre os argumentos, ver <code>help(plot)</code>.</p>
<div class="admonition note">
<p class="admonition-title">
Outras formas de utilizar a função plot()
</p>
<p>
Além de gerar gráficos de dispersão, tentar chamar a função <b>plot(objeto_diferentao)</b> para qualquer tipo de objeto do R geralmente gera um gráfico interessante! Sempre tente fazer isso, a menos que seu objeto seja um <b>data.frame</b> com milhares de colunas!
</p>
</div>
<pre class="r"><code>n &lt;- 100
x &lt;- 1:n
y &lt;- 5 + 2 * x + rnorm(n, sd = 30)
plot(x, y)</code></pre>
<p><img src="/material/r-base/_index_files/figure-html/unnamed-chunk-43-1.png" width="75%" /></p>
<p>O parâmetro <code>type = &quot;l&quot;</code> indica que queremos que os pontos sejam interligados por linhas.</p>
<pre class="r"><code>plot(x, y, type = &quot;l&quot;)</code></pre>
<p><img src="/material/r-base/_index_files/figure-html/unnamed-chunk-44-1.png" width="75%" /></p>
</div>
<div id="histograma" class="section level2">
<h2>Histograma</h2>
<p>Para construir histogramas, utilizamos a função <code>hist()</code>. Os principais parâmetros são:</p>
<ul>
<li><code>x</code> - O vetor numérico para o qual o histograma será construído.</li>
<li><code>breaks</code> - O número (aproximado) de retângulos.</li>
</ul>
<pre class="r"><code>hist(rnorm(1000))</code></pre>
<p><img src="/material/r-base/_index_files/figure-html/unnamed-chunk-45-1.png" width="75%" /></p>
<pre class="r"><code>hist(rnorm(1000), breaks = 6)</code></pre>
<p><img src="/material/r-base/_index_files/figure-html/unnamed-chunk-46-1.png" width="75%" /></p>
</div>
<div id="boxplot" class="section level2">
<h2>Boxplot</h2>
<p>Para construir histogramas, utilizamos a função <code>boxplot()</code>. Os principais parâmetros são:</p>
<ul>
<li><code>x</code> - O vetor numérico para o qual o boxplot será construído.</li>
</ul>
<pre class="r"><code>boxplot(InsectSprays$count, col = &quot;lightgray&quot;)</code></pre>
<p><img src="/material/r-base/_index_files/figure-html/unnamed-chunk-47-1.png" width="75%" /></p>
<p>Observe que o argumento <code>col=</code> muda a cor da caixa do boxplot.</p>
<p>Para mapear duas variáveis ao gráfico, utilizamos um objeto da classe <code>formula</code> e o argumento <code>data=</code>.</p>
<pre class="r"><code>boxplot(count ~ spray, data = InsectSprays, col = &quot;lightgray&quot;)</code></pre>
<p><img src="/material/r-base/_index_files/figure-html/unnamed-chunk-48-1.png" width="75%" /></p>
</div>
<div id="grafico-de-barras" class="section level2">
<h2>Gráfico de barras</h2>
<p>Para construir gráficos de barras, precisamos combinar as funções <code>table()</code> e <code>barplot()</code>.</p>
<p>No gráfico abaixo, primeiro criamos uma tabela de frequências com a função <code>table()</code> e, em seguida, construímos o gráfico com a função <code>barplot()</code>. A função <code>data()</code> carrega bases de dados de pacotes instalados. Veja <code>help(data)</code> para mais detalhes.</p>
<pre class="r"><code>data(diamonds, package = &quot;ggplot2&quot;)
tabela &lt;- table(diamonds$color)
tabela
## 
##     D     E     F     G     H     I     J 
##  6775  9797  9542 11292  8304  5422  2808
barplot(tabela)</code></pre>
<p><img src="/material/r-base/_index_files/figure-html/unnamed-chunk-49-1.png" width="75%" /></p>
<p>Também podemos mapear duas variáveis a um gráfico de barras utilizando tabelas de dupla entrada.</p>
<pre class="r"><code>VADeaths
##       Rural Male Rural Female Urban Male Urban Female
## 50-54       11.7          8.7       15.4          8.4
## 55-59       18.1         11.7       24.3         13.6
## 60-64       26.9         20.3       37.0         19.3
## 65-69       41.0         30.9       54.6         35.1
## 70-74       66.0         54.3       71.1         50.0</code></pre>
<pre class="r"><code>barplot(VADeaths)</code></pre>
<p><img src="/material/r-base/_index_files/figure-html/unnamed-chunk-51-1.png" width="75%" /></p>
</div>
</div>
<div id="exercicios" class="section level1">
<h1>Exercícios</h1>
<p><strong>Sugestão</strong>: resolva os exercícios em arquivo R Markdown, aproveitando para fazer anotações e registrar suas dúvidas ao longo do caminho.</p>
<p><strong>1.</strong> Calculo o número de ouro no R.</p>
<p>Dica: o número de ouro é dado pela expressão <span class="math inline">\(\frac{1 + \sqrt{5}}{2}\)</span>.</p>
<hr />
<p><strong>2.</strong> Qual o resultado da divisão de 1 por 0 no R? E de -1 por 0?</p>
<hr />
<p><strong>3.</strong> Quais as diferenças entre <code>NaN</code>, <code>NULL</code>, <code>NA</code> e <code>Inf</code>? Digite expressões que retornam cada um desses resultados.</p>
<hr />
<p><strong>4.</strong> Sem rodar o código, calcule o que a expressão <code>5 + 3 * 10 %/% 3 == 15</code> vai resultar no R. Em seguida, apenas utilizando parênteses, faço a expressão retornar o valore contrário (i.e., se originariamente for <code>TRUE</code>, faça retornar <code>FALSE</code>).</p>
<hr />
<p><strong>5.</strong> Por que o código abaixo retorna erro? Arrume o código para retornar o valor <code>TRUE</code>.</p>
<pre class="r"><code>x &lt;- 4
if(x = 4) {
  TRUE
}</code></pre>
<hr />
<p><strong>6.</strong> Usando <code>if</code> e <code>else</code>, escreva um código que retorne a string “número” caso o valor seja da classe <code>numeric</code> ou <code>integer</code>; a string “palavra” caso o valor seja da classe <code>character</code>; e <code>NULL</code> caso contrário.</p>
<hr />
<p><strong>7.</strong> Use o <code>for</code> para retornar o valor mínimo do seguinte vetor: <code>vetor &lt;- c(4, 2, 1, 5, 3)</code>. Modifique o seu código para receber vetores de qualquer tamanho.</p>
<hr />
<p><strong>8.</strong> Usando apenas <code>for</code> e a função <code>length()</code>, construa uma função que calcule a média de um vetor número qualquer. Construa uma condição para a função retornar <code>NULL</code> caso o vetor não seja numérico.</p>
<hr />
<p><strong>9.</strong> Rode <code>help(runif)</code> para descobrir o que a função <code>runif()</code> faz. Em seguida, use-a para escrever uma função que retorne um número aleatório inteiro entre 0 e 10 (0 e 10 inclusive).</p>
<hr />
<p><strong>10.</strong> Rode <code>help(sample)</code> para descobrir o que a função <code>sample()</code> faz. Em seguida, use-a para escrever uma função que escolha uma linha aleatoriamente de uma matriz e devolva os seus valores.</p>
<hr />
<p><strong>11.</strong> Rode <code>help(paste)</code> e <code>help(names)</code> para descobrir o que as funções <code>paste()</code> e <code>names()</code> fazem. Em seguida, use-as para escrever um código para gerar a fórmula <code>mpg ~ cyl + disp + hp + drat + wt + qsec + vs + am + gear + carb</code> a partir do data frame <code>mtcars</code>.</p>
<hr />
</div>
<div id="respostas" class="section level1">
<h1>Respostas</h1>
<p><strong>1.</strong> Calculo o número de ouro no R.</p>
<p>Dica: o número de ouro é dado pela expressão <span class="math inline">\(\frac{1 + \sqrt{5}}{2}\)</span>.</p>
<p><strong>Resposta:</strong></p>
<pre class="r"><code>(1 + sqrt(5))/2
## [1] 1.618034</code></pre>
<hr />
<p><strong>2.</strong> Qual o resultado da divisão de 1 por 0 no R? E de -1 por 0?</p>
<p><strong>Resposta:</strong></p>
<p>Infinito e -Infinito.</p>
<pre class="r"><code>1/0
## [1] Inf
-1/0
## [1] -Inf</code></pre>
<hr />
<p><strong>3.</strong> Quais as diferenças entre <code>NaN</code>, <code>NULL</code>, <code>NA</code> e <code>Inf</code>? Digite expressões que retornam cada um desses resultados.</p>
<p><strong>Resposta:</strong></p>
<pre class="r"><code># NaN é o resultado de uma operação matemática inválida. 
# Significa Not A Number.

0/0
## [1] NaN

# NULL é o vazio do R. É como se o objeto não existisse.

NULL
## NULL
a = NULL


# veja que um vetor, mesmo sem elementos não é NULL

is.null(integer(length = 0)) 
## [1] FALSE

# NA é uma constante lógica do R. Siginifica Not Availlable. 
# NA pode ser convertido para quase todos os tipos de vetores do R. 
# É usado principalmente para indicar valores faltantes.

NA
## [1] NA
as.numeric(c(&quot;1&quot;, &quot;2&quot;, &quot;a&quot;))
## Warning: NAs introduced by coercion
## [1]  1  2 NA

# Inf é significa infinito. É o resultado de operações matemáticas 
# cujo limite é infinito.

1/0
## [1] Inf
1/Inf
## [1] 0</code></pre>
<hr />
<p><strong>4.</strong> Sem rodar o código, calcule o que a expressão <code>5 + 3 * 10 %/% 3 == 15</code> vai resultar no R. Em seguida, apenas utilizando parênteses, faço a expressão retornar o valore contrário (i.e., se originariamente for <code>TRUE</code>, faça retornar <code>FALSE</code>).</p>
<p><strong>Resposta:</strong></p>
<p>O resultado da parte esquerda é 14, por isso a expressão retornará <code>FALSE</code>. Para fazê-la retornar <code>TRUE</code>, basta colocar parênteses em volta de <code>3 * 10</code>.</p>
<pre class="r"><code>5 + (3 * 10) %/% 3 == 15
## [1] TRUE</code></pre>
<hr />
<p><strong>5.</strong> Por que o código abaixo retorna erro? Arrume o código para retornar o valor <code>TRUE</code>.</p>
<pre class="r"><code>x &lt;- 4
if(x = 4) {
  TRUE
}</code></pre>
<p><strong>Resposta:</strong></p>
<p>A expressão <code>x = 4</code> está tentando atribuir o valor 4 ao objeto <code>x</code> dentro do if, o que não é permitido pois o controlador <code>if</code> só aceita valores lógicos. Para corrigir o código e fazê-lo retornar <code>TRUE</code>, basta trocar <code>=</code> por <code>==</code>.</p>
<pre class="r"><code>x &lt;- 4
if(x == 4) {
  TRUE
}
## [1] TRUE</code></pre>
<hr />
<p><strong>6.</strong> Usando <code>if</code> e <code>else</code>, escreva um código que retorne a string “número” caso o objeto <code>x</code> seja da classe <code>numeric</code> ou <code>integer</code>; a string “palavra” caso o objeto seja da classe <code>character</code>; e <code>NULL</code> caso contrário.</p>
<p><strong>Resposta:</strong></p>
<pre class="r"><code>x &lt;- 1
# x &lt;- 1L
# x &lt;- &quot;1&quot;

if(is.numeric(x)) {
  &quot;número&quot;
} else if(is.character(x)) {
  &quot;palavra&quot;
} else { 
  NULL
}
## [1] &quot;número&quot;</code></pre>
<p>Note que a função <code>is.numeric()</code> retorna <code>TRUE</code> para as classes <code>integer</code> e <code>numeric</code>.</p>
<hr />
<p><strong>7.</strong> Use o <code>for</code> para retornar o valor mínimo do seguinte vetor: <code>vetor &lt;- c(4, 2, 1, 5, 3)</code>. Modifique o seu código para receber vetores de qualquer tamanho.</p>
<p><strong>Resposta:</strong></p>
<pre class="r"><code>
vetor &lt;- c(4, 2, 1, 5, 3)
minimo &lt;- Inf

for(i in 1:5) {
  
  if(minimo &gt; vetor[i]) {
    minimo &lt;- vetor[i]
  }
  
}

minimo
## [1] 1</code></pre>
<p><strong>Lembrete</strong>: o R já possui a função <code>min()</code> para calcular o mínimo de um conjunto de valores.</p>
<hr />
<p><strong>8.</strong> Usando apenas <code>for</code> e a função <code>length()</code>, construa uma função que calcule a média de um vetor número qualquer. Construa uma condição para a função retornar <code>NULL</code> caso o vetor não seja numérico.</p>
<p><strong>Resposta:</strong></p>
<pre class="r"><code>media &lt;- function(x) {
  
  i &lt;- 1
  tamanho &lt;- length(x)
  soma &lt;- 0
  
  for(i in 1:tamanho){
    soma &lt;- soma + x[i]
  }
  
  return(soma/tamanho)
}

media(1:3)
## [1] 2</code></pre>
<hr />
<p><strong>9.</strong> Rode <code>help(runif)</code> para descobrir o que a função <code>runif()</code> faz. Em seguida, use-a para escrever uma função que retorne um número aleatório inteiro entre 0 e 10 (0 e 10 inclusive).</p>
<p><strong>Resposta:</strong></p>
<p>A função <code>runif()</code> gera números reais aleatórios entre um valor mínimo e um valor máximo.</p>
<pre class="r"><code>alea &lt;- function() {
  
  x &lt;- runif(n = 1, min = 0, max = 10)
  x &lt;- round(x)
  
  return(x)
}

alea()
## [1] 1</code></pre>
<p>Veja que construímos uma função sem argumentos. Podemos generalizá-la incluindo os argumentos da função <code>runif()</code>.</p>
<pre class="r"><code>alea &lt;- function(n, min, max) {
  
  x &lt;- runif(n = n, min = min, max = max)
  x &lt;- round(x)
  
  return(x)
}

alea(2, 2, 5)
## [1] 3 3
alea(5, 100, 105)
## [1] 105 101 101 104 101</code></pre>
<p>Observe que não há problema em usar os mesmos nomes para os argumentos. Isso se deve aos <em>environments</em>. Para saber mais, confira <a href="http://curso-r.com/blog/2017/06/19/2017-06-19-environments/">este post</a>.</p>
<hr />
<p><strong>10.</strong> Rode <code>help(sample)</code> para descobrir o que a função <code>sample()</code> faz. Em seguida, use-a para escrever uma função que escolha uma linha aleatoriamente de uma matriz e devolva os seus valores.</p>
<p><strong>Resposta:</strong></p>
<pre class="r"><code>matriz &lt;- matrix(runif(20), nrow = 5, ncol = 4)

linha_alea &lt;- function(matriz) {
  
  x &lt;- 1:nrow(matriz)
  
  linha &lt;- sample(x, size = 1)
  
  return(matriz[linha,])
}

matriz
##            [,1]        [,2]      [,3]      [,4]
## [1,] 0.34785024 0.910933818 0.2257346 0.1254017
## [2,] 0.96786999 0.702538257 0.8450673 0.1809966
## [3,] 0.57227014 0.508786267 0.5793089 0.0899560
## [4,] 0.74257491 0.195590232 0.8141231 0.6307272
## [5,] 0.07289864 0.006875243 0.7046009 0.2428173
linha_alea(matriz)
## [1] 0.072898642 0.006875243 0.704600903 0.242817345</code></pre>
<hr />
<p><strong>11.</strong> Rode <code>help(paste)</code> e <code>help(names)</code> para descobrir o que as funções <code>paste()</code> e <code>names()</code> fazem. Em seguida, use-as para escrever um código para gerar a fórmula <code>mpg ~ cyl + disp + hp + drat + wt + qsec + vs + am + gear + carb</code> a partir do data frame <code>mtcars</code>.</p>
<p><strong>Resposta:</strong></p>
<pre class="r"><code>variaveis &lt;- names(mtcars)

esq &lt;- &quot;mpg ~ &quot;
dir &lt;- paste(variaveis[-1], collapse = &quot; + &quot;)

formula &lt;- paste0(esq, dir)
as.formula(formula)
## mpg ~ cyl + disp + hp + drat + wt + qsec + vs + am + gear + carb</code></pre>
<p>Observe que a função <code>paste0()</code> é equivalente à função <code>paste()</code> com o argumento <code>sep = &quot;&quot;</code>.</p>
</div>
