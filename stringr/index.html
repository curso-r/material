<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="pt-br">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <meta name="google-site-verification" content="3wpHHnuvp_52dDrXvZoNa5_Vs4BWcyVoeM62GbQ7llc" />
    <title>Stringr - Curso-R</title>
    <meta name="generator" content="Hugo 0.17" />

    
    <meta name="description" content="Materiais para cursos de R">
    
    <link rel="canonical" href="../stringr/">
    
    <meta name="author" content="Curso-R">
    

    <meta property="og:url" content="/stringr/">
    <meta property="og:title" content="Curso-R">
    <meta property="og:image" content="/logo-curso-r.png">
    <meta name="apple-mobile-web-app-title" content="Curso-R">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="//images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="//images/favicon.ico">
    <link href="../stylesheets/prism/prism.css" rel="stylesheet" />
    <link rel="stylesheet" href="../stylesheets/icons.css">
    <link rel="stylesheet" href="../stylesheets/application.css">
    <link rel="stylesheet" href="../stylesheets/temporary.css">
    <link rel="stylesheet" href="../stylesheets/palettes.css">
    <link rel="stylesheet" href="../stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="../javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Stringr
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/curso-r" title="@curso-r on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="http://material.curso-r.com" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../logo-curso-r.png">
        </div>
      
      <div class="name">
        <strong>Curso-R </strong>
        
          <br>
          http://material.curso-r.com
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="http://material.curso-r.com/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="http://material.curso-r.com/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Curso R" href="../">
	
	Curso R
</a>



  
</li>



<li>
  
    



<a  title="R básico" href="../rbase/">
	
	R básico
</a>



  
</li>



<li>
  
    



<a  title="Pipe" href="../pipe/">
	
	Pipe
</a>



  
</li>



<li>
  
    



<a class="current" title="Stringr" href="../stringr/">
	
	Stringr
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="Forcats" href="../forcats/">
	
	Forcats
</a>



  
</li>



<li>
  
    



<a  title="Transformação" href="../manip/">
	
	Transformação
</a>



  
</li>



<li>
  
    



<a  title="Visualização" href="../ggplot/">
	
	Visualização
</a>



  
</li>



<li>
  
    



<a  title="Modelagem" href="../modelos/">
	
	Modelagem
</a>



  
</li>



<li>
  
    



<a  title="Web Scraping" href="../scrape/">
	
	Web Scraping
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/curso-r" target="_blank" title="@curso-r on GitHub">
              @curso-r on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:contato@curso-r.com" title="Email of contato@curso-r.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Stringr </h1>

			

<p>Variáveis do tipo texto são muito comuns nos bancos de dados e geralmente são
colunas que dão bastante trabalho para serem manipuladas. É muito comun encontrar
bancos de dados em que os textos de uma coluna não estão padronizados, por exemplo, uma coluna <code>Estado</code> com &ldquo;SP&rdquo;, &ldquo;sp&rdquo;, &ldquo;Sao Paulo&rdquo;, &ldquo;São Paulo&rdquo; etc, todas as variações indicando o mesmo estado.</p>

<p>Para manipular esses textos, o R possui diversas funções para manipular textos. No entanto, as funções do <code>base</code> não possuem uma interface consistente e cada uma tem a sua forma de passar os parâmetros, dificultando a programação durante a análise.</p>

<p>Por isso, é recomendado usar o pacote <code>stringr</code>, que possui uma sintaxe consistente, permitindo que o usuário realize qualquer manipulação com textos com maior facilidade.</p>

<h3 id="vantagens-do-stringr-em-relação-ao-base">Vantagens do stringr em relação ao base</h3>

<ul>
<li>Sintaxe unificada, o que auxilia na memorização e leitura do código.</li>
<li>Todas as funções são vetorizadas.</li>
<li>Construído sobre a <a href="http://site.icu-project.org/">biblioteca ICU</a>, implementada em <code>C</code> e <code>C++</code>, apresentando resultados rápidos e confiáveis.</li>
</ul>

<h3 id="regras-básicas-do-pacote">Regras básicas do pacote</h3>

<ul>
<li>As funções de manipulação de texto começam com <code>str_</code>. Caso esqueça o nome de uma função, basta digitar <code>stringr::str_</code> e apertar <code>TAB</code> para ver quais são as opções.</li>
<li>O primeiro argumento da função é sempre uma <code>string</code> ou um vetor de <code>strings</code>.</li>
</ul>

<h3 id="curiosidade">Curiosidade</h3>

<p>Inicialmente, o <code>stringr</code> era um <em>wrapper</em> de funções do <code>base</code>. Depois disso,
surgiu um novo pacote <code>stringi</code>, com sintaxe similar ao <code>stringr</code>, mas funcionando como
<em>wrapper</em> da biblioteca ICU. Wickham gostou tanto do pacote <code>stringi</code>
que decidiu reescrever o <code>stringr</code> como um <em>wrapper</em> do <code>stringi</code>.
Veja <a href="https://github.com/tidyverse/stringr/blob/master/NEWS.md">essa página</a> para detalhes.</p>

<h2 id="conceitos-básicos">Conceitos básicos</h2>

<p>Todas as funções do <code>stringr</code> começam com o prefixo <code>str</code>. Isso ajuda na hora de
encontrar a função que você está procurando. No Rstudio, digite <code>str_</code> e
aperte <em>tab</em> para visualizar a lista de funções com esse prefixo. Você pode verificar o que cada função faz até encontrar a que atende às suas necessidades.</p>

<p><img src="figures/str_tab.png" alt="str_tab" /></p>

<p>Nesta sessão, vamos utilizar as funções mais simples do <code>stringr</code>. Depois vamos
ensinar um pouco de Regex e, em seguida, veremos as funções mais avançadas do
pacote.</p>

<h3 id="str-length">str_length</h3>

<p>A função mais simples do <code>stringr</code> é a função <code>str_length</code>. Esta função recebe
apenas uma string como argumento e retorna o número de caracteres. Por exemplo:</p>

<pre><code class="language-r">library(stringr)
str_length(&quot;olá&quot;)
## [1] 3
length(&quot;olá&quot;)
## [1] 1
</code></pre>

<p>Veja: <code>str_length</code> é diferente de <code>length</code>. O primeiro retorna o número de caracteres
e o segundo retorna o comprimento do objeto. Isso fica mais claro no seguinte exemplo:</p>

<pre><code class="language-r">s &lt;- c(&quot;olá mundo&quot;, &quot;olá universo&quot;)
str_length(s)
## [1]  9 12
length(s)
## [1] 2
</code></pre>

<p>Agora, o <code>str_length</code> retornou um vetor com o número de caracteres de cada elemento do vetor <code>s</code> e o <code>length</code> retornou o comprimento do vetor <code>s</code>. Note que espaço é considerado como um caractere.</p>

<h3 id="str-trim">str_trim</h3>

<p>É muito comum encontrar textos que vêm com espaços a mais, principalmente de dados
provenientes de formulários em que cada usuário escreve da forma que prefere.</p>

<pre><code class="language-r">string &lt;- '\nessa      string é muito suja       \n'
str_trim(string)
## [1] &quot;essa      string é muito suja&quot;
</code></pre>

<p>A função <code>str_trim</code> ajuda removendo os espaços excedetes antes e depois da string.</p>

<h3 id="str-sub">str_sub</h3>

<p>Às vezes você precisa obter alguma parte fixa de uma string, como, por exemplo, encontrar variáveis com valores da forma:</p>

<pre><code class="language-r">s &lt;- c(&quot;01-Feminino&quot;, &quot;02-Masculino&quot;, &quot;03-Indefinido&quot;)
</code></pre>

<p>Você pode querer manipular essa string para obter apenas a parte final da string.
Neste caso, pode usar a função <code>str_sub</code>.</p>

<pre><code class="language-r">str_sub(s, start = 4) # pegar do quarto até o último caractere
## [1] &quot;Feminino&quot;   &quot;Masculino&quot;  &quot;Indefinido&quot;
</code></pre>

<p>Também é possível obter apenas os números:</p>

<pre><code class="language-r">str_sub(s, end = 2) # pegar apenas os dois primeiros caracteres
## [1] &quot;01&quot; &quot;02&quot; &quot;03&quot;
</code></pre>

<p>Em outros casos você precisa obter os últimos 2 caracteres.</p>

<pre><code class="language-r">s &lt;- c(&quot;Feminino-01&quot;, &quot;Masculino-02&quot;, &quot;Indefinido-03&quot;)
str_sub(s, end = -4)
## [1] &quot;Feminino&quot;   &quot;Masculino&quot;  &quot;Indefinido&quot;
str_sub(s, start = -2)
## [1] &quot;01&quot; &quot;02&quot; &quot;03&quot;
</code></pre>

<p>É possível usar os argumentos <code>start</code> e <code>end</code> conjuntamente.</p>

<pre><code class="language-r">s &lt;- c(&quot;__SP__&quot;, &quot;__MG__&quot;, &quot;__RJ__&quot;)
str_sub(s, 3, 4)
## [1] &quot;SP&quot; &quot;MG&quot; &quot;RJ&quot;
</code></pre>

<h3 id="str-to-upper-str-to-lower-str-to-title">str_to_upper, str_to_lower, str_to_title</h3>

<p>Essas funções servem para modificar a caixa das letras. Por exemplo:</p>

<pre><code class="language-r">s &lt;- &quot;Olá, tudo bem?&quot;
str_to_lower(s)
## [1] &quot;olá, tudo bem?&quot;
str_to_upper(s)
## [1] &quot;OLÁ, TUDO BEM?&quot;
str_to_title(s)
## [1] &quot;Olá, Tudo Bem?&quot;
</code></pre>

<p>Essas são as funções mais simples do pacote <code>stringr</code> e não exigem nenhum conhecimento de regex. Note que nenhuma delas possui o parâmetro <code>pattern</code>. Você verá como especificar esse parâmetros nas próximas sessões.</p>

<h2 id="expressões-regulares">Expressões Regulares</h2>

<p>Trabalhar com textos exige um certo conhecimento de expressões regulares (<em>regex</em>). <a href="https://pt.wikipedia.org/wiki/Express%C3%A3o_regular">Expressões regulares</a> permitem identificar conjuntos de caracteres, palavras e outros padrões por meio de uma sintaxe concisa.</p>

<p>O <code>stringr</code> utiliza regex da forma descrita <a href="http://www.gagolewski.com/software/stringi/manual/?manpage=stringi-search-regex">neste documento</a>. A própria <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html">definição</a> de regex do R é um ótimo manual.</p>

<p>Vamos estudar expressões regulares por meio de exemplos e da função <code>str_detect()</code>. Ela retorna <code>TRUE</code> se uma string atende a uma expressão regular e <code>FALSE</code> caso contrário.</p>

<p>Por exemplo:</p>

<pre><code class="language-r">library(stringr)
str_detect(&quot;sao paulo&quot;, pattern = &quot;paulo$&quot;)
## [1] TRUE
str_detect(&quot;sao paulo sp&quot;, pattern = &quot;paulo$&quot;)
## [1] FALSE
</code></pre>

<p>A regex/pattern &ldquo;paulo\$&rdquo; indica que o texto deve ser terminado em &ldquo;paulo&rdquo;. Existem diversos de caracteres auxiliares que vão auxiliar na manipulação dos textos, assim como o &ldquo;\$&ldquo;. Importante: o valor passado para o argumento <code>pattern</code> de qualquer função do pacote <code>stringr</code> será entendido como uma regex.</p>

<p>A tabela abaixo mostra a aplicação de seis <code>regex</code> em seis strings distintas.</p>

<table>
<thead>
<tr>
<th align="left">testes</th>
<th align="left">^ban</th>
<th align="left">b ?an</th>
<th align="left">ban</th>
<th align="left">BAN</th>
<th align="left">ban$</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">abandonado</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
</tr>

<tr>
<td align="left">ban</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
</tr>

<tr>
<td align="left">banana</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
</tr>

<tr>
<td align="left">BANANA</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
</tr>

<tr>
<td align="left">ele levou ban</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
</tr>

<tr>
<td align="left">pranab anderson</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>

<h3 id="quantificadores">Quantificadores</h3>

<p>Os caracteres <code>+</code>, <code>*</code> e <code>{x,y}</code> indicam quantas vezes um padrão se repete:</p>

<ul>
<li><code>ey+</code> significa <code>e</code> e depois <code>y</code> &ldquo;<strong>uma vez</strong> ou mais&rdquo;. Por exemplo, reconhece <code>hey</code>, <code>heyy</code>, <code>a eyyy</code>, mas não reconhece <code>e</code>, <code>y</code> nem <code>yy</code>.</li>
<li><code>ey*</code> significa &ldquo;<strong>nenhuma vez</strong> ou mais&rdquo;. Por exemplo, reconhece <code>hey</code>, <code>heyy</code>, <code>a eyyy</code> e <code>e</code>, mas não reconhece <code>y</code> nem <code>yy</code>.</li>
<li><code>ey{3}</code> significa &ldquo;exatamente três vezes&rdquo;. Por exemplo, reconhece <code>eyyy</code> e <code>eyyyy</code>, mas não reconhece <code>eyy</code>.</li>
<li><code>ey{1,3}</code> significa &ldquo;entre uma e três vezes&rdquo;.</li>
</ul>

<p>Para aplicar um quantificador a um conjunto de caracteres, use parênteses. Por exemplo, <code>(ey )+</code> reconhece <code>ey ey</code>.</p>

<h3 id="conjuntos">Conjuntos</h3>

<p>Colocando caracteres dentro de <code>[]</code>, reconhecemos quaisquer caracteres desse conjunto. Alguns exemplos práticos:</p>

<ul>
<li><code>[Cc]asa</code> para reconhecer &ldquo;casa&rdquo; em maiúsculo ou minúsculo.</li>
<li><code>[0-9]</code> para reconhecer somente números. O mesmo vale para letras <code>[a-z]</code>, <code>[A-Z]</code>, <code>[a-zA-Z]</code> etc.</li>
<li>O símbolo <code>^</code> dentro do colchete significa negação. Por exemplo, <code>[^0-9]</code> significa pegar tudo o que não é número.</li>
<li>O símbolo <code>.</code> fora do colchete indica &ldquo;qualquer caractere&rdquo;, mas dentro do colchete é apenas ponto.</li>
<li>Use <code>[[:space:]]+</code> para reconhecer espaços e <code>[[:punct:]]+</code> para reconhecer pontuações.</li>
</ul>

<h3 id="miscelânea">Miscelânea</h3>

<ul>
<li>Use <code>abjutils::rm_accent()</code> para retirar os acentos de um texto.</li>
<li>Use <code>|</code> para opções, por exemplo <code>desfavor|desprov</code> reconhece tanto &ldquo;desfavorável&rdquo; quanto &ldquo;desprovido&rdquo;</li>
<li><code>\n</code> pula linha, <code>\f</code> é final da página, <code>\t</code> é tab. Use <code>\</code> para transformar caracteres especiais em literais.</li>
<li><code>tolower()</code> e <code>toupper()</code> para mudar o case de uma string.</li>
</ul>

<p>A lista de possibilidades com expressões regulares é extensa.
Um bom lugar para testar o funcionamento de expressões regulares é o <a href="https://regex101.com/">regex101</a>.</p>

<h2 id="funções-avançadas">Funções avançadas</h2>

<p>Agora que já vimos as funções básicas do <code>stringr</code> e aprendemos um pouco de regex, vamos às funções mais avançadas. Basicamante, essas funções buscarão <code>patterns</code> emum vetor de strings e farão alguma coisa quando encontrá-lo.</p>

<p>Como já vimos na sessão sobre regex, a função mais simples que possui o argumento
<code>pattern</code> é a <code>str_detect</code>.</p>

<h3 id="str-detect">str_detect()`</h3>

<p>Retorna <code>TRUE</code> se a regex é compatível com a string e <code>FALSE</code> caso contrário.</p>

<pre><code class="language-r">library(stringr)
str_detect(&quot;sao paulo&quot;, pattern = &quot;paulo$&quot;)
## [1] TRUE
str_detect(&quot;sao paulo sp&quot;, pattern = &quot;paulo$&quot;)
## [1] FALSE
</code></pre>

<h3 id="str-replace-e-str-replace-all">str_replace() e str_replace_all()</h3>

<p>Substituem um padrão (ou todos) encontrado para um outro padrão.</p>

<pre><code class="language-r">frutas &lt;- c(&quot;uma maçã&quot;, &quot;duas pêras&quot;, &quot;três bananas&quot;)
str_replace(frutas, &quot;[aeiou]&quot;, &quot;-&quot;) # substitui a primeira vogal de cada string por &quot;-&quot;
## [1] &quot;-ma maçã&quot;     &quot;d-as pêras&quot;   &quot;três b-nanas&quot;
str_replace_all(frutas, &quot;[aeiou]&quot;, &quot;-&quot;) # substitui todas as vogais por &quot;-&quot;
## [1] &quot;-m- m-çã&quot;     &quot;d--s pêr-s&quot;   &quot;três b-n-n-s&quot;

yyyy &lt;- &quot;yyyyy yyyyy ll zz&quot;
str_replace(yyyy, 'y+', 'x') # substitui o primeiro y ou y's por x
## [1] &quot;x yyyyy ll zz&quot;
str_replace_all(yyyy, 'y+', 'x') # substitui todos os y ou y's por somente um x
## [1] &quot;x x ll zz&quot;
str_replace_all(yyyy, 'y', 'x') # substitui y por x
## [1] &quot;xxxxx xxxxx ll zz&quot;

str_replace_all('string     com    muitos espaços', ' +', ' ') # tirar espaços extras
## [1] &quot;string com muitos espaços&quot;
</code></pre>

<p>Muitas vezes queremos remover alguns caracteres especiais de um texto, mas esses
caracteres fazem parte de comandos de regex, por exemplo:</p>

<pre><code class="language-r">string &lt;- &quot;1 + 2 + 5&quot;
str_replace_all(string, &quot;+&quot;, &quot;-&quot;)
## Error in stri_replace_all_regex(string, pattern, fix_replacement(replacement), : Syntax error in regexp pattern. (U_REGEX_RULE_SYNTAX)
</code></pre>

<p>Essa forma retorna um erro, pois a função tenta montar uma regex. Você poderia
tentar de outras formas, que não retornariam erro, mas também não retornariam o
resultado esperado.</p>

<pre><code class="language-r">str_replace_all(string, &quot; + &quot;, &quot; - &quot;)
## [1] &quot;1 + 2 + 5&quot;
</code></pre>

<p>Nesse caso, use a função <code>fixed</code> para indicar para o <code>stringr</code> que você não deseja
que o parâmetro seja reconhecido como uma regex.</p>

<pre><code class="language-r">str_replace_all(string, fixed(&quot;+&quot;), &quot;-&quot;)
## [1] &quot;1 - 2 - 5&quot;
</code></pre>

<h3 id="str-extract-e-str-extract-all">str_extract() e str_extract_all()</h3>

<p>Extraem padrões de uma string. Por exemplo:</p>

<pre><code class="language-r">r_core_group &lt;- c(
  'Douglas Bates', 'John Chambers', 'Peter Dalgaard',
  'Robert Gentleman', 'Kurt Hornik', 'Ross Ihaka', 'Tomas Kalibera',
  'Michael Lawrence', 'Friedrich Leisch', 'Uwe Ligges', '...'
)
sobrenomes &lt;- str_extract(r_core_group, '[:alpha:]+$')
sobrenomes
##  [1] &quot;Bates&quot;     &quot;Chambers&quot;  &quot;Dalgaard&quot;  &quot;Gentleman&quot; &quot;Hornik&quot;   
##  [6] &quot;Ihaka&quot;     &quot;Kalibera&quot;  &quot;Lawrence&quot;  &quot;Leisch&quot;    &quot;Ligges&quot;   
## [11] NA
</code></pre>

<h3 id="str-match-e-str-match-all">str_match() e str_match_all()</h3>

<p>Extrai pedaços da string identificados pela regex. Caso queira extrair
somente a parte identificada, use parênteses.</p>

<pre><code class="language-r"># Exemplo de pergunta SOPt: http://pt.stackoverflow.com/q/150024/6036
presidentes &lt;- c(&quot;da Fonseca, DeodoroDeodoro da Fonseca&quot;, 
&quot;Peixoto, FlorianoFloriano Peixoto&quot;, &quot;de Morais, PrudentePrudente de Morais&quot;, 
&quot;Sales, CamposCampos Sales&quot;)
nomes_presidentes &lt;- str_match(presidentes, '(.*), ([a-zA-Z]{1,})[A-Z]{1}')
nomes_presidentes
##      [,1]                   [,2]         [,3]      
## [1,] &quot;da Fonseca, DeodoroD&quot; &quot;da Fonseca&quot; &quot;Deodoro&quot; 
## [2,] &quot;Peixoto, FlorianoF&quot;   &quot;Peixoto&quot;    &quot;Floriano&quot;
## [3,] &quot;de Morais, PrudenteP&quot; &quot;de Morais&quot;  &quot;Prudente&quot;
## [4,] &quot;Sales, CamposC&quot;       &quot;Sales&quot;      &quot;Campos&quot;
str_c(nomes_presidentes[,3], nomes_presidentes[,2], sep = ' ')
## [1] &quot;Deodoro da Fonseca&quot; &quot;Floriano Peixoto&quot;   &quot;Prudente de Morais&quot;
## [4] &quot;Campos Sales&quot;
</code></pre>

<h3 id="str-split-e-str-split-fixed">str_split() e str_split_fixed()</h3>

<p>Separa uma string em várias de acordo com um separador.</p>

<pre><code class="language-r">string &lt;- 'Durante um longo período de tempo o &quot;R&quot; foi escrito &quot;P&quot; como no alfabeto cirílico. O seu nome no alfabeto fenício era &quot;rech&quot;. Seu significado era o de uma cabeça, representada pela adaptação do hieróglifo egípcio de uma cabeça. Transformou-se no &quot;rô&quot; dos gregos. Os romanos modificaram o rô acrescentando um pequeno traço para diferenciá-lo do no nosso P.'
str_split(string, fixed('.'))
## [[1]]
## [1] &quot;Durante um longo período de tempo o \&quot;R\&quot; foi escrito \&quot;P\&quot; como no alfabeto cirílico&quot;                
## [2] &quot; O seu nome no alfabeto fenício era \&quot;rech\&quot;&quot;                                                         
## [3] &quot; Seu significado era o de uma cabeça, representada pela adaptação do hieróglifo egípcio de uma cabeça&quot;
## [4] &quot; Transformou-se no \&quot;rô\&quot; dos gregos&quot;                                                                 
## [5] &quot; Os romanos modificaram o rô acrescentando um pequeno traço para diferenciá-lo do no nosso P&quot;         
## [6] &quot;&quot;
</code></pre>

<p>O <code>str_split_fixed</code> faz o mesmo que <code>str_split()</code>, mas separa apenas <code>n</code> vezes.</p>

<pre><code class="language-r">str_split_fixed(string, fixed('.'), 3)
##      [,1]                                                                                   
## [1,] &quot;Durante um longo período de tempo o \&quot;R\&quot; foi escrito \&quot;P\&quot; como no alfabeto cirílico&quot;
##      [,2]                                          
## [1,] &quot; O seu nome no alfabeto fenício era \&quot;rech\&quot;&quot;
##      [,3]                                                                                                                                                                                                                                      
## [1,] &quot; Seu significado era o de uma cabeça, representada pela adaptação do hieróglifo egípcio de uma cabeça. Transformou-se no \&quot;rô\&quot; dos gregos. Os romanos modificaram o rô acrescentando um pequeno traço para diferenciá-lo do no nosso P.&quot;
</code></pre>

<h3 id="str-subset">str_subset()</h3>

<p>Retorna somente as strings compatíveis com a regex.</p>

<pre><code class="language-r">frases &lt;- c('a roupa do rei', 'de roma', 'o rato roeu')
str_subset(frases, 'd[eo]')
## [1] &quot;a roupa do rei&quot; &quot;de roma&quot;
</code></pre>

<p>É o mesmo que fazer o subset do R e a função <code>str_detect</code>.</p>

<pre><code class="language-r">frases[str_detect(frases, &quot;d[eo]&quot;)]
## [1] &quot;a roupa do rei&quot; &quot;de roma&quot;
</code></pre>

<h2 id="exercícios">Exercícios</h2>

<p><strong>1.</strong> Faça uma regex que capture múltiplas versões da palavra &lsquo;casa&rsquo;. Ela deve funcionar
com as palavras &lsquo;Casa&rsquo;, &lsquo;CASA&rsquo;, &lsquo;CaSa&rsquo;, &lsquo;CAsa&rsquo;. Teste-a usando a função <code>str_detect</code>.</p>

<pre><code class="language-r">palavras &lt;- c('Casa', 'CASA', 'CaSa', 'CAsa')
</code></pre>

<p><strong>2.</strong> Imagine que você possui a seguinte string que é a parte final de uma URL:</p>

<ul>
<li><code>/ac/rio-branco/xpto-xyz-1-0-1fds2396-5</code></li>
</ul>

<p>Você precisa transformá-la em &lsquo;AC - Rio Branco&rsquo;. <strong>Dica</strong>: Use a função <code>str_split</code>.</p>

<pre><code class="language-r">url &lt;- c('/ac/rio-branco/xpto-xyz-1-0-1fds2396-5')
</code></pre>

<p><strong>3.</strong> Você possui o seguinte vetor de caracteres: <code>x &lt;- c('Alto', 'Médio', 'Baixo')</code>. A partir desse vetor,
crie um vetor com os valores `&lsquo;03 - Alto&rsquo;, &lsquo;02 - Médio&rsquo; e &lsquo;03 - Baixo&rsquo;.</p>

<p><strong>4.</strong> Crie uma função que retorna <code>TRUE</code> quando a string é um <a href="https://pt.wikipedia.org/wiki/Pal%C3%ADndromo">palíndromo</a> e <code>FALSO</code> caso não seja.
<em>Palíndromo</em> é uma sequência que é lida da mesma forma tanto da direita pra esquerda quanto
da esquerda para a direita. O nome &lsquo;Ana&rsquo;, por exemplo, é um palíndromo.</p>

<p><strong>5.</strong> De acordo com as regras da língua portuguesa, antes de “P” ou “B” devemos usar a letra “M”. Em outras palavras, com outras consoantes, usamos a letra “N”. Suponha que você tem o seguinte
texto com erros gramaticais.</p>

<pre><code class="language-r">texto &lt;- 'Nós chamamos os bonbeiros quando começou o incêndio.'
</code></pre>

<p>Crie uma função para corrigí-lo.</p>

<p><strong>6.</strong> O CPF é um número de 11 dígitos, por exemplo: 54491651884. No entanto para facilitar
a visualização costumamos mostrá-lo com separadores a cada 3 casas: 544.916.518-84.
Crie uma função que transforma um número de 11 dígitos em uma string com as separações, como um CPF.</p>

<p><strong>7.</strong> Considere o seguinte texto</p>

<pre><code class="language-r">txt &lt;- &quot;A função mais importante para leitura de dados no `lubridate` é a `ymd`. Essa função serve para ler qualquer data de uma `string` no formato `YYYY-MM-DD`. Essa função é útil pois funciona com qualquer separador entre os elementos da data e também porque temos uma função para cada formato (`mdy`, `dmy`, `dym`, `myd`, `ydm`).&quot;
</code></pre>

<p>Extraia todas as combinações da função <code>ymd</code>, sem repetições.</p>

<p><strong>8.</strong> Considere os textos abaixo</p>

<pre><code class="language-r">txts &lt;- c(
  'o produto é muito bom',
  'o produto não é bom',
  'o produto não é muito bom',
  'o produto não é ruim',
  'o produto não é não bom'
)
</code></pre>

<p>Crie uma regra para identificar se o texto refere-se a um feedback positivo ou negativo sobre o produto (considera não bom = ruim e vice-versa). Retorne um vetor lógico que vale <code>TRUE</code> se o feedback é positivo e <code>FALSE</code> caso contrário.</p>


			<aside class="copyright" role="note">
				
				&copy; 2017 Disponível sobre Licença MIT &ndash;
				
				Site built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="../rbase/" title="Introdução">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Introdução
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="../lubridate/" title="Introdução">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Introdução
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '\/';
      var repo_id  = 'http:\/\/material.curso-r.com';
    
    </script>
    
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="../javascripts/application.js"></script>
    <script src="../javascripts/datacamp.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var div_h2    = document.getElementsByClassName("section level2")
      var headers   = document.getElementsByTagName("h2");	
      var scrollspy = document.getElementById('scrollspy');
      
      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");


	    if(headers[i].id == ""){
	     a.setAttribute("href", "#" + div_h2[i].id);
	    } else {
	     a.setAttribute("href", "#" + headers[i].id);
	    }

            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;
            
            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }
      }
      
      
      /* Add permanent link next to the headers */
      var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

      for(var i = 0; i < headers.length; i++) {
          var a = document.createElement("a");
          a.setAttribute("class", "headerlink");
          a.setAttribute("href", "#" + headers[i].id);
          a.setAttribute("title", "Permanent link")
          a.innerHTML = "#";
          headers[i].appendChild(a);
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-87272102-1', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="//gohugo.io/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../javascripts/prism.js"></script> 
    
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$']],
          displayMath: [['$$','$$']],
          processEscapes: true,
          processEnvironments: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
          TeX: { equationNumbers: { autoNumber: "AMS" },
               extensions: ["AMSmath.js", "AMSsymbols.js"] }
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        
        
        
        var all = MathJax.Hub.getAllJax(), i;
        for(i = 0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
    </script>
  </body>
</html>

